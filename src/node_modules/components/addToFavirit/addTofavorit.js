import React from 'react'

import useFetch from 'hooks/useFetch'
import s from './addToFavorit.module.css'
const AddToFavarit = ({isFavorited, favoritesCount, articleSlug}) => { 

        const apiUrl = `/articles/${articleSlug}/favorite`
        const [{response}, doFetch] = useFetch(apiUrl)
        const favoritesCountWithResponse = response ? 
        response.article.favoritesCount : favoritesCount
        const isFavoritewithResponse = response ?
        response.article.favorited : isFavorited
        const handelLike = event => {
            event.preventDefault()
            doFetch({
                method: isFavoritewithResponse ? 'delete' : 'post'
            })
        }
    return ( 
        <div className={s.likes}>
            <button onClick={handelLike} className={s.btn12}>like &nbsp; {favoritesCountWithResponse} </button>
        </div>
    )
}

export default AddToFavarit