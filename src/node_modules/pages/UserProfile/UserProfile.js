import React, { useEffect } from 'react'
import {NavLink} from 'react-router-dom'

import s from './UserProfile.module.css'
import useFetch from 'hooks/useFetch'
import UserArticles from 'components/UserArticles/UserArticles'

const UserProfile = ({location , match}) =>{
    const slug = match.params.slug
    const isFavorites = location.pathname.includes('favorites')
    const apiUrl = `/profiles/${slug}`
    const [{response}, doFetch] = useFetch(apiUrl)

    useEffect(()=>{
        doFetch()
    },[doFetch])
    if (!response){
    return null
    }
    return (
        <div  className={s.container}>
            <div className={s.profile}>
                <img className={s.image} alt='' src={response.profile.image}/>
                <h4 className={s.username}>{response.profile.username}</h4>
                <div>{response.profile.bio} </div>
            </div>
            <div className={s.info}>
                <div className={s.links}>
                            <NavLink  excat className={s.link1} to={`/profiles/${response.profile.username}`} >
                                MyPost
                            </NavLink>
                            <NavLink className={s.link2} to={`/profiles/${response.profile.username}/favorites`} >
                                Favorites Post
                            </NavLink>
                </div>
                <div className={s.posts}>
                    <UserArticles
                    username={response.profile.username}
                    location={location}
                    isFavorites={isFavorites}
                    url={match.url}
                    />
                </div>
            </div>

        </div>
    )
}

export default UserProfile